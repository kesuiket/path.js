<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>test - path.js</title>
</head>
<body>

<script src="../path.js"></script>
<script>
var fullpath = 'http://example.com/dir1/dir2/index.min.html';
var fullpathWithDironly = 'http://example.com/dir1/dir2';
var fullpathWithPort = 'http://example.com:8080/dir1/dir2/index.html';
var fullpathWithParam = 'http://example.com/dir1/dir2/index.html?key=value&key';
var fullpathWithAll = 'http://example.com:8080/dir1/dir2/index.html?key=value&key2=value2#hash';
var fullpathWithHash = 'http://example.com/dir1/dir2/index.html#hash';
var absolutePath = '/dir1/dir2/index.html';
var relativePath = '../css/style.css';


console.log('ℹ︎ `path` is object ', typeof path === 'object');
console.log(' ');

console.log('----- path.parse() ------');
console.log('ℹ︎ parse', path.parse(fullpathWithAll));
console.log(' ');

console.log('----- path.cwd() ------');
console.log('ℹ︎ cwd', '"' + path.cwd() + '"');
console.log(' ');

console.log('----- path.basename() ------');
console.log(c(path.basename(fullpath) === 'index.min.html'), '"'+ fullpath +'"', path.basename(fullpath));
console.log(c(path.basename(fullpath, '.html') === 'index.min'), '"'+ fullpath +'" (extname)', path.basename(fullpath, '.html'));
console.log(c(path.basename(fullpathWithDironly) === 'dir2'), '"'+ fullpathWithDironly +'"', path.basename(fullpathWithDironly));
console.log(' ');

console.log('----- path.dirname() ------');
console.log(c(path.dirname(fullpath) === '/dir1/dir2'), '"'+ fullpath +'"', path.dirname(fullpath));
console.log(c(path.dirname(fullpathWithDironly) === '/dir1'), '"'+ fullpathWithDironly +'"', path.dirname(fullpathWithDironly));
console.log(c(path.dirname(fullpathWithParam) === '/dir1/dir2'), '"'+ fullpathWithParam +'"', path.dirname(fullpathWithParam));
console.log('ℹ︎ "'+ relativePath +'"', path.dirname(relativePath), '"相対パスを渡した時、絶対パスが返る仕様でよいのか?"');
console.log(' ');

console.log('----- path.extname() ------');
console.log(c(path.extname(fullpath) === '.html'), '"'+ fullpath +'"', path.extname(fullpath));
console.log(c(path.extname('index.html') === '.html'), '"index.html"', path.extname('index.html'));
console.log(c(path.extname('index.') === ''), '"index."', path.extname('index.'));
console.log(c(path.extname('index') === ''), '"index"', path.extname('index'));
console.log(c(path.extname('.index') === ''), '".index"', path.extname('.index'));
console.log(' ');

console.log('----- path.join() ------');
console.log(c(path.join('/foo', 'bar', 'baz/asdf', 'quux', '..') === '/foo/bar/baz/asdf'), '"/foo", "bar", "baz/asdf", "quux", ".."', path.join('/foo', 'bar', 'baz/asdf', 'quux', '..'));
console.log(c(path.join('http://example.com', 'bar/foo', '../css/style.css') === 'http://example.com/bar/css/style.css'), '"http://example.com", "bar/foo", "../css/style.css"', path.join('http://example.com', 'bar/foo', '../css/style.css'));
console.log(' ');

console.log('----- path.resolve() ------');
console.log(c(path.resolve('/foo/bar', './baz') === '/foo/bar/baz'), '"/foo/bar", "./baz"', path.resolve('/foo/bar', './baz'));
console.log(c(path.resolve('/dir1/dir2', '../css/style.css') === '/dir1/css/style.css'), '"/dir1/dir2", "../css/style.css"', path.resolve('/dir1/dir2', '../css/style.css'));
console.log(c(path.resolve('http://example.com/bar', '../baz') === 'http://example.com/baz'), '"http://example.com/bar", "../baz"', path.resolve('http://example.com/bar', '../baz'));
console.log('ℹ︎ "cwd", "../css/style.css"', path.resolve('../css/style.css'));
console.log(' ');

console.log('----- path.relative() ------');
console.log(c(path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb') === '../../impl/bbb'), '"/data/orandea/test/aaa", "/data/orandea/impl/bbb"', path.relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb'));
console.log(' ');


console.log('----- path.equal() ------');
console.log(c(path.equal('/foo/bar', '/foo/bar') === true), '"/foo/bar", "foo/bar"', path.equal('/foo/bar', 'foo/bar'));
console.log(c(path.equal('/foo/bar', '/foo/bar/index.html') === false), '"/foo/bar", "foo/bar/index.html"', path.equal('/foo/bar', 'foo/bar/index.html'));
console.log(c(path.equal('/foo/bar/baz', '/foo/bar/*') === true), '"/foo/bar/baz", "foo/bar/*"', path.equal('/foo/bar/baz', 'foo/bar/*'));
console.log(c(path.equal('/foo/bar/baz/index.html', '/foo/**/index.html') === true), '"/foo/bar/baz/index.html", "foo/**/index.html"', path.equal('/foo/bar/baz/index.html', 'foo/**/index.html'));
console.log(c(path.equal('/foo/bar/baz/index.html', '/foo/**/*.html') === true), '"/foo/bar/baz/index.html", "foo/**/*.html"', path.equal('/foo/bar/baz/index.html', 'foo/**/*.html'));
console.log(c(path.equal('/foo/bar/baz/index.html', '') === false), '"/foo/bar/baz/index.html", "(empty)"', path.equal('/foo/bar/baz/index.html', ''));
console.log(c(path.equal('./bar/index.html','./index.html') === false), '"./bar/index.html", "./index.html"', path.equal('./bar/index.html','./index.html'));
console.log(c(path.equal('/**/*') === true), '[cwd], "/**/*"', path.equal('/**/*'));
console.log(' ');

function c(f) {
  if (f) {
    return '✔︎';
  }
  return '✖︎';
}

</script>

</body>
